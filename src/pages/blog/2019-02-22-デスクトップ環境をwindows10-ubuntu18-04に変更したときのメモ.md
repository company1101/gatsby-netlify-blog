---
templateKey: blog-post
title: デスクトップ環境をWindows10 -> Ubuntu18.04 -> Manjaroに変更したときのメモ
date: 2019-02-22T05:29:51.656Z
description: Dockerを使いたいの巻
tags:
  - '#hardware'
---
もともと株とかFXのソフトを動かしたくてWindowsを使っていたけれど、ブラウザでも問題ない状態になったので、メインOSをUbuntu 18.04(後にManjaro)のデュアルブートにした。その時のメモ。

##### 環境
カーネル: 4.15.0-45-generic

マザーボード: MSI B250I GAMING PRO AC ITX

BIOS: E7A67IMS.130

グラフィックボード: MSI GeForce GTX 1080 GAMING X 8G


#### Ubuntu 18.04を入れたが断念するまでの記録
##### 下準備
自作PCには、OSブート用のSSDとファイル保存用のHDDをストレージとして使っている。Windowsは将来的に消してVirtualBox上に移行する予定だけれども、うまくインストールが進まなかったときのために、暫定的にWindowsとLinuxのデュアルブートにすることにした。

というわけでEase Partition Masterを使ってSSDの方にパーティションを切って、ext4でフォーマット、あとはUNetbootinでUSBにISOを焼いた。

#### インストール
再起動したらF11を連打して、USBから起動を選択するも、Xまで立ち上がったところで黒画面から進まなくなった。

軽くググると、[こんな記事](https://www.reddit.com/r/Ubuntu/comments/92uxbf/unable_to_install_ubuntu_firmware_bug_tsc_deadline/)が見つかったので、`ACPI=off nomodeset`をセットして起動するとうまく動いた(よくわかってない)。

あとはダイアログに従ってポチポチ押してればOK。

#### 初期設定

##### apt
まずは何も考えずにお決まりのやつ。
```sudo apt-get update```

あとはよく使うものたちを入れた。
```sudo apt-get install vim zsh gcc screen ibus-mozc dconfig-editor build-essential```

##### GPU
nvidiaのドライバをインストール。`apt`にもあるが、昔ドハマりしたのでおとなしく[公式](https://www.nvidia.com/Download/index.aspx?lang=en-us)のものをダウンロード。

##### キー設定
CtrlとCapsをスワップ。

```gsettings set org.gnome.desktop.input-sources xkb-options "['ctrl:swapcaps']"```

先程入れたdconfig-editorでorg/gnome/desktop/wm/keybindingsを選択し、Application Switcherのショートカット(Alt+`)を無効にして、代わりにSwitch Input Methodにそのショートカットを設定。

#### ここまで来てやめた
##### キー入力遅延
キー入力の遅さが気になった。具体的には、キー入力を連続でしたときに、最後のキーを打ち終わるまで文字が表示されず、変換Enterをおしたあたりで一気に表示される感じ。調べてサクッと解決できると思いきや、結構根が深そう。

[Keyboard input lag in Ubuntu 18.04
](https://askubuntu.com/questions/1029256/keyboard-input-lag-in-ubuntu-18-04)

1,2時間調べたりいろいろ試したけど、解決せず。そもそも17.04から導入されたGNOMEデスクトップは重いとの評判が多く、結構度し難い問題だし特にUbuntuにこだわりがないので、ここまで来て他のディストリビューションの導入を検討。サクッと調べてArch Linux系の[Manjaro](https://manjaro.org/)を入れてみることにした。
